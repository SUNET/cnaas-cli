---
cli:
  - command:
      name: 'device_init'
      description: 'Initializd a device'
      url: '/device_init'
      attributes:
        - name: 'id'
          mandatory: true
          description: 'Device ID'
          url_suffix: true
        - name: 'hostname'
          mandatory: true
          description: 'Hostname'
        - name: 'device_type'
          mandatory: true
          description: 'Type of device (ACCESS, DIST, ...)'
      methods:
        - name: 'post'

  - command:
      name: 'devices'
      description: 'Handles devices'
      url: '/devices'
      attributes:
      methods:
        - name: "get"

  - command:
      name: 'device'
      description: 'Handles a single device'
      url: '/device'
      attributes:
        - name: 'id'
          mandatory: true
          description: 'Device ID'
          url_suffix: true
        - name: "hostname"
          mandatory: true
          description: 'Hostname'
          url_suffix: false
        - name: "site_id"
          mandatory: false
          description: 'Site ID'
          url_suffix: false
        - name: "description"
          mandatory: false
          description: 'Description'
          url_suffix: false
        - name: "management_ip"
          mandatory: false
          description: 'Management IP'
          url_suffix: false
        - name: "dhcp_ip"
          mandatory: false
          description: 'DHCP IP'
          url_suffix: false
        - name: "infra_ip"
          mandatory: false
          description: 'Infra IP'
          url_suffix: false
        - name: "oob_ip"
          mandatory: false
          description: 'OOB IP'
          url_suffix: false
        - name: "serial"
          mandatory: false
          description: 'Serial #'
          url_suffix: false
        - name: "ztp_mac"
          mandatory: false
          description: 'MAC adress'
          url_suffix: false
        - name: "platform"
          mandatory: true
          description: 'Platform'
          url_suffix: false
        - name: "vendor"
          mandatory: false
          description: 'Vendor'
          url_suffix: false
        - name: "model"
          mandatory: false
          description: 'Model'
          url_suffix: false
        - name: "os_version"
          mandatory: false
          description: 'Version'
          url_suffix: false
        - name: "synchronized"
          mandatory: false
          description: 'Synchronized'
          url_suffix: false
        - name: "state"
          mandatory: false
          description: 'Device state'
          url_suffix: false
        - name: "device_type"
          mandatory: true
          description: 'Type'
          url_suffix: false
        - name: "confhash"
          mandatory: false
          description: 'Config hash'
          url_suffix: false
        - name: "last_seen"
          mandatory: false
          description: 'Seen'
          url_suffix: false
        - name: "port"
          mandatory: false
          description: 'Port'
          url_suffix: false
      methods:
        - name: "get"
        - name: "post"

  - command:
      name: 'sync'
      description: 'Sync to'
      url: '/device_syncto'
      attributes:
        - name: 'hostname'
          mandatory: false
          description: 'device name'
        - name: 'device_type'
          mandatory: false
          description: 'device type'
        - name: 'group'
          mandatory: false
          description: 'group name'
        - name: 'all'
          mandatory: false
          description: 'sync all devices'
        - name: 'dry_run'
          mandatory: true
          description: 'dry run'
        - name: 'force'
          mandatory: true
          description: 'force run'
      methods:
        - name: "post"

  - command:
      name: 'jobs'
      description: 'Show jobs'
      url: '/jobs?sort=-id&per_page=100'
      attributes:
      methods:
        - name: 'get'

  - command:
      name: 'job'
      description: 'Show job'
      url: '/job'
      attributes:
        - name: 'id'
          mandatory: true
          description: 'Job ID'
          url_suffix: true
      methods:
        - name: 'get'

  - command:
      name: 'linknets'
      description: 'Linknets'
      url: '/linknets'
      attributes:
        - name: 'id'
          mandatory: true
          description: 'Job ID'
        - name: "ipv4_network"
          mandatory: true
          description: 'IPv4 Network'
        - name: "device_a_id"
          mandatory: true
          description: 'Device A ID'
        - name: "device_a_ip"
          mandatory: true
          description: 'Device A IP'
        - name: "device_a_port"
          mandatory: false
          description: 'Device A port'
        - name: "device_b_id"
          mandatory: true
          description: 'Device B ID'
        - name: "device_b_ip"
          mandatory: true
          description: 'Device B IP'
        - name: "device_b_port"
          mandatory: false
          description: 'Device B port'
        - name: "site_id"
          mandatory: false
          description: 'Site ID'
        - name: "description"
          mandatory: false
          description: 'Description'
      methods:
        - name: 'get'
        - name: 'post'

  - command:
      name: 'mgmtdomains'
      description: 'Management domains'
      url: '/mgmtdomains'
      attributes:
        - name: 'id'
          mandatory: true
          description: 'Job ID'
        - name: "ipv4_gw"
          mandatory: true
          description: 'IPv4 gateway'
        - name: "device_a_id"
          mandatory: true
          description: 'Device A ID'
        - name: "device_a_ip"
          mandatory: true
          description: 'Device A IP'
          mandatory: true
          description: 'Device B ID'
        - name: "device_b_ip"
          mandatory: true
          description: 'Device B IP'
        - name: "site_id"
          mandatory: false
          description: 'Site ID'
        - name: "description"
          mandatory: false
          description: 'Description'
        - name: "vlan"
          mandatory: true
          description: 'VLAN'
        - name: "esi_mac"
          mandatory: false
          description: 'ESI MAC'
        - name: "device_a"
          mandatory: false
          description: 'Device A hostname'
        - name: "device_b"
          mandatory: false
          description: 'Device B hostname'
      methods:
        - name: 'get'
        - name: 'post'

  - command:
      name: 'settings'
      description: 'Refresh settings'
      url: '/repository/settings'
      attributes:
        - name: 'action'
          mandatory: true
          description: 'Settings action'
      methods:
        - name: 'get'
        - name: 'put'

  - command:
      name: 'templates'
      description: 'Refresh templates'
      url: '/repository/templates'
      attributes:
        - name: 'action'
          mandatory: true
          description: 'Settings action'
      methods:
        - name: 'get'
        - name: 'put'

  - command:
      name: 'plugins'
      description: 'Show plugins'
      url: '/plugins'
      attributes:
      methods:
        - name: 'get'

  - command:
      name: 'groups'
      description: 'Show groups'
      url: '/groups'
      attributes:
      methods:
        - name: 'get'

  - command:
      name: 'version'
      description: 'Show version'
      url: '/system/version'
      attributes:
      methods:
        - name: 'get'

  - command:
      name: 'interfaces'
      description: 'Interface'
      url: '/device/<hostname>/interfaces'
      attributes:
        - name: 'hostname'
          mandatory: true
          description: 'Configure interfaces'
      methods:
        - name: 'get'

  - command:
      name: 'copy'
      description: 'Download firmware images'
      url: '/firmware'
      attributes:
        - name: 'url'
          mandatory: true
          description: 'URL to the firmware'
        - name: 'sha1'
          mandatory: true
          description: 'SHA1 sum of the firmware'
        - name: 'verify_tls'
          mandatory: true
          description: 'Ignore SSL certificate'
      methods:
        - name: 'get'
        - name: 'post'

  - command:
      name: 'upgrade'
      description: 'Upgrade firmware on switch'
      url: '/firmware/upgrade'
      attributes:
        - name: 'url'
          mandatory: true
          description: 'URL to the firmware'
        - name: 'filename'
          mandatory: true
          description: 'Firmware filename'
        - name: 'hostname'
          mandatory: false
          description: 'Hostname of the switch to use'
        - name: 'group'
          mandatory: false
          description: 'Group name'
        - name: 'pre-flight'
          mandatory: false
          description: 'Do a pre-flight check'
        - name: 'download'
          mandatory: false
          description: 'Download the firmware to the switch'
        - name: 'activate'
          mandatory: false
          description: 'Activate the firmware'
        - name: 'reboot'
          mandatory: false
          description: 'Reboot the swtich when done'
        - name: 'start_at'
          mandatory: false
          description: 'Schedule the firmware upgrade'
      methods:
        - name: 'post'
